<!-- index.html at the end of workshop 2 -->

<!DOCTYPE html>
<html>
<head>
  <title>Hack Book</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
  <link rel="stylesheet" href="../static/main.css">
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="../static/script.js"></script>
  <script type="text/javascript" src="{{
    url_for('static', filename='../static/js/api.js') }}"></script>
</head>
<body>
  <div id="container">
    <h1>{{name}}</h1>
    
    <img src="https://i.ibb.co/q9jNDpF/119202528-356931955689583-5869759538756809981-n-2.jpg">

    <p>Welcome to my hack book portfolio! I'm ready to do some cool stuff</p>

    {% for key, value in facts.items() %}
      <p class="facts">{{key}}: {{value}}</p>
    {% endfor %}

    Title: <input type="text" id="title"><br>
    Description: <input type="text" id="description"><br>
    <div class="ui button" id="post-button">Post</div>
    {% for post in posts %}
      <div class="post">
        <div class="ui segment">
          <h3>{{post['title']}}</h3>
          <p>{{post['description']}}</p>
        </div>
      </div>
    {% endfor %}
    <p>Click this button for a random cat üê±</p>
    <button style="margin-bottom: 10px;"id="cat-button" type="button">CAT</button>
    <div id="cat-div"></div>
  </div>

  <h3 style='color: #ccc;font-size: 30px;'>No message yet..</h3>
  <div class="message_holder"></div>

  <form action="" method="POST">
    <input type="text" class="username" placeholder="User Name"/>
    <input type="text" class="message" placeholder="Messages"/>
    <input type="submit"/>
  </form>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
  <script type="text/javascript">
    var socket = io.connect('http://' + document.domain + ':' + location.port);

    socket.on( 'connect', function() {
      socket.emit( 'my event', {
        data: 'User Connected'
      } )
      var form = $( 'form' ).on( 'submit', function( e ) {
        e.preventDefault()
        let user_name = $( 'input.username' ).val()
        let user_input = $( 'input.message' ).val()
        socket.emit( 'my event', {
          user_name : user_name,
          message : user_input
        } )
        $( 'input.message' ).val( '' ).focus()
      } )
    } )
    socket.on( 'my response', function( msg ) {
      console.log( msg )
      if( typeof msg.user_name !== 'undefined' ) {
        $( 'h3' ).remove()
        $( 'div.message_holder' ).append( '<div><b style="color: #000">'+msg.user_name+'</b> '+msg.message+'</div>' )
      }
    })
  </script>

  <!-- <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script> -->
</body>
</html>